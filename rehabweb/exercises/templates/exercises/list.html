{% extends 'base_regular.html' %}

{% block content %}
<!-- Forzar contenido en la parte superior (anula el centrado de .wr-content-center solo en esta página) -->
<style>
  .wr-content-center { align-items: flex-start !important; padding-top: 1.5rem; }
</style>

<div class="container py-4">

  <!-- TÍTULO A TODO EL ANCHO -->
  <div class="w-100 bg-primary text-white py-3 px-4 mb-4 rounded">
    <h1 class="h3 m-0">Ejercicios</h1>
  </div>

  <!-- TABLA A TODO EL ANCHO -->
  <div class="table-responsive w-100">
    <table class="table table-striped table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Descripción</th>
          <th scope="col">Numero de ejercicio</th>
          <th scope="col">Repeticiones</th>
          <th scope="col">Dificultad</th>
          <th scope="col">Fecha de Creación</th>
          <th scope="col" class="text-end">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for ex in exercises %}
          <tr>
            <th scope="row">{{ forloop.counter }}</th>
            <td>{{ ex.descripcion }}</td>
            <td>{{ ex.numero_ejercicio }}</td>
            <td>{{ ex.repeticiones_base }}</td>
            <td>{{ ex.dificultad }}</td>
            <td>{{ ex.fecha_creacion|slice:":10" }}</td>
            <td class="text-end">
              <a
                href="{% url 'exercises:edit' ex.id %}"
                class="btn btn-warning btn-sm me-1 d-inline-flex align-items-center justify-content-center"
                style="width:36px; height:34px;"
                title="Editar"
                aria-label="Editar"
              >
                <i class="bi bi-pencil-fill"></i>
              </a>

              <form method="post" 
              class="d-inline-block" onsubmit="return confirm('¿Eliminar ejercicio?');">
                {% csrf_token %}
                <button
                  type="submit"
                  class="btn btn-danger btn-sm d-inline-flex align-items-center justify-content-center"
                  style="width:36px; height:34px;"
                  title="Eliminar"
                  aria-label="Eliminar"
                >
                  <i class="bi bi-trash-fill"></i>
                </button>
              </form>
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="7" class="text-center">No exercises yet.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- BOTÓN PARA AÑADIR EJERCICIO (debajo de la tabla) -->
  <div class="mt-4 d-flex justify-content-end">
    <a href="{% url 'exercises:create' %}" class="btn btn-success btn-lg">
      <i class="bi bi-plus-circle"></i> Añadir Ejercicio
    </a>
  </div>

</div>

{% endblock %}
