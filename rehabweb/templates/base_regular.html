<!DOCTYPE html>
{% load static %}
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WebRehab</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="{% static 'css/login.css' %}" />
    <style>
      .wr-navbar {
        background: linear-gradient(90deg, #0d6efd 0%, #6610f2 100%);
      }
      .wr-navbar .nav-link {
        color: #fff !important;
      }
      .wr-logo {
        height: 40px;
      }
      .wr-content-center {
        min-height: calc(100vh - 72px);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
      }
      .wr-card {
        width: 100%;
        max-width: 900px;
      }
    </style>
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-lg wr-navbar">
        <div class="container">
          <!-- Logo izquierda -->
          <a
            class="navbar-brand d-flex align-items-center text-white"
            href="{% url 'exercises:home' %}"
          >
            <img
              src="{% static 'img/logo.png' %}"
              alt="Logo"
              class="wr-logo me-2"
              onerror="this.style.display='none'"
            />
            <span class="fw-bold">WebRehab</span>
          </a>

          <!-- Links centrados -->
          <div class="mx-auto d-none d-lg-flex">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'exercises:list' %}"
                  >Ejercicios</a
                >
              </li>
            </ul>
          </div>

          <!-- BotÃ³n logout derecha -->
          <div class="d-flex align-items-center">
            {% if request.session.api_token %}
            <form method="post" action="{% url 'accounts:logout' %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-outline-light">
                <i class="bi bi-box-arrow-right"></i> Salir
              </button>
            </form>
            {% else %}
            <a class="btn btn-outline-light" href="{% url 'accounts:login' %}">
              <i class="bi bi-box-arrow-in-right"></i> Entrar
            </a>
            {% endif %}
          </div>
        </div>
      </nav>
    </header>

    <main class="wr-site">
      {% if messages %}
      <div class="wr-messages" style="position: fixed; top: 72px; left: 0; right: 0; z-index: 1050; width: 100%;">
        <div class="container">
          {% for m in messages %}
            <div class="wr-message">{{ m }}</div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- Contenido centrado en la parte media -->
      <section class="wr-content-center">
        <div class="wr-card">
          {% block content %}
          {% endblock %}
        </div>
      </section>
    </main>

    <!-- Bootstrap JS bundle -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
